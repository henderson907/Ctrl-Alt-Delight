<header>
  <h1><%= @webpage.page_title %></h1>
  <p><%= link_to @webpage.url, @webpage.url %></p>
</header>

<main>
  <div class="tabs">
    <button class="tablink" onclick="openTab(event, 'toc')">Table of Contents</button>
    <button class="tablink" onclick="openTab(event, 'wordcount')">Word Count</button>
    <button class="tablink" onclick="openTab(event, 'frequentwords')">Frequent Words</button>
    <button class="tablink" onclick="openTab(event, 'inclusive')">Inclusive & Green Analysis</button>
    <button class="tablink" onclick="openTab(event, 'openai_summary')">OpenAI Job Summary</button>
  </div>

  <div id="toc" class="tabcontent">
    <h2>Table of Contents</h2>
    <% if @webpage.table_of_contents.present? %>
      <%= @webpage.table_of_contents.html_safe %>
    <% else %>
      <p>No table of contents available.</p>
    <% end %>
  </div>
  <div id="wordcount" class="tabcontent" style="display:none">
    <h2>Total Word Count</h2>
    <p><%= @webpage.total_word_count %></p>
  </div>
  <div id="frequentwords" class="tabcontent" style="display:none">
    <h2>Top 10 Most Frequent Words</h2>
    <% if @webpage.frequent_words.present? %>
      <%= @webpage.frequent_words.html_safe %>
    <% else %>
      <p>No frequent words available.</p>
    <% end %>
  </div>
  <div id="inclusive" class="tabcontent" style="display:none">
    <h2>Inclusive Terms Found</h2>
    <% if @inclusive_terms_found.present? %>
      <% @inclusive_terms_found.each do |category, terms| %>
        <strong><%= category.to_s.humanize %>:</strong> <%= terms.join(", ") %><br>
      <% end %>
    <% else %>
      <p>None found.</p>
    <% end %>
    <h2>Exclusionary Phrases Found</h2>
    <% if @exclusionary_phrases_found.present? %>
      <%= @exclusionary_phrases_found.join(", ") %>
    <% else %>
      <p>None found.</p>
    <% end %>
    <h2>Green Keywords Found</h2>
    <% if @green_keywords_found.present? %>
      <%= @green_keywords_found.join(", ") %>
    <% else %>
      <p>None found.</p>
    <% end %>
  </div>
  <div id="openai_summary" class="tabcontent" style="display:none">
    <h2>OpenAI Job Summary</h2>
    <% if @webpage.openai_summary.present? %>
      <p><%= @webpage.openai_summary %></p>
    <% else %>
      <p>No summary available.</p>
    <% end %>
  </div>

  <script>
  function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
  }
  </script>

  <%= link_to "&#x21A9 Back to main".html_safe, root_path %>
</main>
